<code id="main"></code>
<script>
  import { EditorView } from "codemirror";
  import luauLsp from "../../lsp/client";
  import { WebSocketTransport } from "@open-rpc/client-js";
  import extensions from "./codemirror/extensions";

  const editorArea = document.getElementById("main")!;

  const sock = new WebSocketTransport("ws://localhost:3001/");
  const documentUri = `file:///tmp/${document.location.hash.substring(2, 7)}.lua`

  const luauLspClient = luauLsp(sock, documentUri);

  new EditorView({
    extensions: extensions(luauLspClient),
    parent: editorArea,
  });
</script>
<style>
  .cm-editor { height: 50px }
  .cm-scroller { overflow: auto }
</style>